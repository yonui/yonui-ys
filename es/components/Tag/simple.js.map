{"version":3,"sources":["components/Tag/simple.js"],"names":["React","ReactDOM","Animate","classNames","omit","Icon","CheckableTag","Tag","props","e","onClose","defaultPrevented","dom","findDOMNode","style","width","getBoundingClientRect","setState","closing","_","existed","state","closed","afterClose","color","test","prefixCls","closable","className","children","otherProps","closeIcon","close","isPresetColor","classString","divProps","tagStyle","backgroundColor","tag","animationEnd","Component"],"mappings":"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","sourcesContent":["import React from 'react';\nimport ReactDOM from 'react-dom';\nimport Animate from 'rc-animate';\nimport classNames from 'classnames';\nimport omit from 'omit.js';\nimport Icon from 'bee-icon';\nimport CheckableTag from './simpleCheckableTag';\n\nexport default class Tag extends React.Component {\n  static CheckableTag = CheckableTag;\n  static defaultProps = {\n    prefixCls: 'u-tag',\n    closable: false\n  };\n\n  constructor (props) {\n    super(props);\n\n    this.state = {\n      closing: false,\n      closed: false\n    };\n  }\n\n  close = (e) => {\n    const onClose = this.props.onClose;\n    if (onClose) {\n      onClose(e);\n    }\n    if (e.defaultPrevented) {\n      return;\n    }\n    const dom = ReactDOM.findDOMNode(this);\n    dom.style.width = `${dom.getBoundingClientRect().width}px`;\n    // It's Magic Code, don't know why\n    dom.style.width = `${dom.getBoundingClientRect().width}px`;\n    this.setState({\n      closing: true\n    });\n  }\n\n  animationEnd = (_, existed) => {\n    if (!existed && !this.state.closed) {\n      this.setState({\n        closed: true,\n        closing: false\n      });\n\n      const afterClose = this.props.afterClose;\n      if (afterClose) {\n        afterClose();\n      }\n    }\n  }\n\n  isPresetColor (color) {\n    if (!color) { return false; }\n    return /^(pink|red|yellow|orange|cyan|green|blue|purple)(-inverse)?$/.test(color);\n  }\n\n  render () {\n    const { prefixCls, closable, color, className, children, style, ...otherProps } = this.props;\n    const closeIcon = closable ? <Icon type='uf-close' onClick={this.close} /> : '';\n    const isPresetColor = this.isPresetColor(color);\n    const classString = classNames(prefixCls, {\n      [`${prefixCls}-${color}`]: isPresetColor,\n      [`${prefixCls}-has-color`]: (color && !isPresetColor),\n      [`${prefixCls}-close`]: this.state.closing\n    }, className);\n    // fix https://fb.me/react-unknown-prop\n    const divProps = omit(otherProps, [\n      'onClose',\n      'afterClose'\n    ]);\n    const tagStyle = {\n      backgroundColor: (color && !isPresetColor) ? color : null,\n      ...style\n    };\n    const tag = this.state.closed ? null : (\n      <div\n        data-show={!this.state.closing}\n        {...divProps}\n        className={classString}\n        style={tagStyle}\n      >\n        <span className={`${prefixCls}-text`}>{children}</span>\n        {closeIcon}\n      </div>\n    );\n    return (\n      <Animate\n        component=''\n        showProp='data-show'\n        transitionName={`${prefixCls}-zoom`}\n        transitionAppear\n        onEnd={this.animationEnd}\n      >\n        {tag}\n      </Animate>\n    );\n  }\n}\n"],"file":"simple.js"}