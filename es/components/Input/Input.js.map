{"version":3,"sources":["components/Input/Input.js"],"names":["React","Component","PropTypes","FormControl","InputGroup","omit","TextArea","Search","sizeMap","small","large","defaultProps","size","type","propsType","string","InputAdapter","props","inputRef","input","focus","blur","e","onPressEnter","onKeyDown","keyCode","val","onFocus","clearOpt","onBlur","onClick","onChange","state","value","setState","defaultValue","nextProps","disabled","placeholder","addonBefore","addonAfter","suffix","others","withAddon","componentClass","formControl","handleKeyDown","handleChange","handleClick","handleBlur","handleFocus"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\n\nimport FormControl from 'bee-form-control';\nimport InputGroup from 'bee-input-group';\nimport omit from 'omit.js';\n\nimport TextArea from './TextArea';\nimport Search from './Search';\n\nconst sizeMap = {\n  small: 'sm',\n  large: 'lg',\n  default: 'md'\n};\n\nconst defaultProps = {\n  size: 'default',\n  type: 'text'\n};\n\nconst propsType = {\n  size: PropTypes.string\n};\n\nclass InputAdapter extends Component {\n  constructor (props) {\n    super(props);\n    this.state = {\n      value: this.props.value || this.props.defaultValue || ''\n    };\n  }\n\n  componentWillReceiveProps (nextProps) {\n    if (nextProps.value !== this.state.value) {\n      this.setState({\n        value: nextProps.value\n      })\n    }\n  }\n\n  focus = () => {\n    this.inputRef.input.focus();\n  }\n\n  blur = () => {\n    this.inputRef.input.blur();\n  }\n\n  handleKeyDown = (e) => {\n    const { onPressEnter, onKeyDown } = this.props;\n    if (e.keyCode === 13 && onPressEnter) {\n      onPressEnter(e);\n    }\n    if (onKeyDown) {\n      onKeyDown(e);\n    }\n  }\n\n  handleFocus = (val, e) => {\n    this.props.onFocus && this.props.onFocus(e);\n  }\n\n  handleBlur = (val, e, clearOpt) => {\n    this.props.onBlur && this.props.onBlur(e, clearOpt);\n  }\n\n  handleClick = (val, e) => {\n    this.props.onClick && this.props.onClick(e);\n  }\n\n  handleChange = (val, e) => {\n    this.props.onChange && this.props.onChange(e);\n    if (val !== this.state.value) {\n      this.setState({ value: val });\n    }\n  }\n\n  render () {\n    let { defaultValue, disabled, size, placeholder, addonBefore, addonAfter, suffix, type, ...others } = this.props;\n    const { value } = this.state;\n\n    // 根据withAdon 来判断是不是需要用 InputGroup\n    const withAddon = addonAfter || addonBefore;\n\n    let { componentClass } = this.props;\n    componentClass = componentClass || 'input';\n\n    if (type === 'textarea') {\n      componentClass = type;\n      type = 'text';\n    }\n\n    const formControl = <FormControl\n      {...omit(others, ['value', 'defaultValue'])}\n      type={type}\n      disabled={disabled}\n      ref={(e) => { this.inputRef = e }}\n      placeholder={placeholder}\n      value={value}\n      defaultValue={defaultValue}\n      size={sizeMap[size]}\n      onKeyDown={this.handleKeyDown}\n      onChange={this.handleChange}\n      onClick={this.handleClick}\n      onBlur={this.handleBlur}\n      onFocus={this.handleFocus}\n      componentClass={componentClass}\n      title={type !== 'password' && (value || placeholder)}\n    />;\n\n    if (suffix || withAddon) {\n      // 目前 suffix 主要用于处理参照的 icon\n      return (\n        <InputGroup simple={!!suffix} className={disabled ? 'disabled' : ''}>\n          {\n            withAddon && addonBefore && <InputGroup.Addon>{addonBefore}</InputGroup.Addon>\n          }\n          {formControl}\n          {\n            suffix && <InputGroup.Button\n              shape='border'\n              onClick={this.handleClick}\n            >\n              {suffix}\n            </InputGroup.Button>\n          }\n          {\n            withAddon && addonAfter && <InputGroup.Addon>{addonAfter}</InputGroup.Addon>\n          }\n        </InputGroup>\n      );\n    }\n    return formControl;\n  }\n}\n\nInputAdapter.TextArea = TextArea;\nInputAdapter.Search = Search;\n\nInputAdapter.defaultProps = defaultProps;\nInputAdapter.propsType = propsType;\n\nexport default InputAdapter;\n"],"file":"Input.js"}